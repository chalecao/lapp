var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},t=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),r=function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},o=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e},i=function(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)},u=function(e){return function(t){return(void 0===t?"undefined":n(t))===e}},a=function(n){return function(e){return e.type===n}},c=function(n){return u("undefined")(n)&&void 0==n},f=u("string"),d=u("boolean"),l=u("number"),s=function(n){return n.toString().match("function")},p=function(n){return n.toString().match("class ")},h=function(n){return null===n},v=a("native"),y=a("thunk"),b=a("text"),m=Array.isArray,g=function(n){return"Object"==Object.prototype.toString.call(n).slice(8,-1)},O=function(n,e){return n.fn===e.fn},k=function(n){return["svg","path","animate"].indexOf(n)>=0},_=function(n){return/^on/.test(n)},j=function(n){return n.slice(2).toLowerCase()},A=function e(t,r){var o={};return Object.keys(t).forEach(function(i){o[r+"."+i]=t[i],"object"===n(t[i])&&(o=Object.assign(o,e(t[i],r+"."+i)))}),o},E=function(n,e){var t=-1,r=n.find(function(n,r){if(n.fn&&n.fn.toString().match(e))return t=r,!0});return{index:t,children:r}},N=function n(e){var t;if(g(e))t={};else{if(!m(e))return e;t=[]}for(var r in e){var o=e[r];g(o)?t[r]=n(o):m(o)?t[r]=n(o):t[r]=e[r]}return t};function w(n){for(var e=arguments,t=arguments.length,r=Array(t>2?t-2:0),o=2;o<t;o++)r[o-2]=e[o];var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n)return r=Array.prototype.reduce.call(r,S,[]),s(n)?$(n,i,r,n):{type:"native",tagName:n,attributes:i,children:r}}function $(n,e,t,r){return{type:"thunk",fn:n,props:e,children:t,options:r}}function x(n){return{type:n?"text":"empty",nodeValue:n}}function S(n,e){return f(e)||l(e)?n.push(x(e)):h(e)||c(e)||(m(e)?n=[].concat(i(n),i(e.reduce(S,[]))):n.push(e)),n}var C=function(){function n(){e(this,n)}return t(n,[{key:"$update",value:function(n){n&&n()}},{key:"render",value:function(){}}]),n}();function M(n,e){e&&Object.keys(e).forEach(function(t){_(t)&&n.addEventListener(j(t),e[t])})}function P(n,e){e&&Object.keys(e).forEach(function(t){_(t)&&n.removeEventListener(j(t),e[t])})}function V(n,e,t,r){t?(n[r](e,t),n[e]=!0):(n[r](e),n[e]=!1)}function L(n,e,t,r){_(e)||("className"===e?n[r]("class",t):d(t)?V(n,e,t,r):void 0!=t&&(""+t).length?n[r](e,t):n.removeAttribute(e))}function T(n,e,t,r){t?r&&t===r||L(n,e,t,"setAttribute"):L(n,e,d(t)?t:r,"removeAttribute")}function U(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},t,e);Object.keys(r).forEach(function(r){_(r)?(P(n,{name:t[r]}),M(n,{name:e[r]})):T(n,r,e[r],t[r])})}function R(n){var e=f(n)||l(n)?n:"";return document.createTextNode(e)}function q(n,e){var t=n.props,r={children:n.children,props:t},o=void 0,i=void 0;if(p(n.fn))o=(i=new n.fn).render(r),i.$update=i.$update.bind(this,function(){e&&e("updateAll")});else try{o=n.fn(r)}catch(t){o=(i=new n.fn).render(r),i.$update=i.$update.bind(this,function(){e&&e("updateAll")})}if(!o)return"";var u=D(o);return M(u,o.attributes),n.onMount=o.attributes.onMount,n.afterMount=o.attributes.afterMount,n.state={vnode:o,$ins:i,model:r},u}function H(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function z(n,e){var t=k(n.tagName)?H(n.tagName):document.createElement(n.tagName);return n.attributes&&U(t,n.attributes),n.attributes&&M(t,n.attributes),n.children.map(function(n){return{item:n,el:D(n,e)}}).forEach(function(e){var r=e.item,o=e.el;"thunk"==r.type&&(r.fn.$update=function(){return n.fn.$update&&n.fn.$update()}),r.onMount&&r.onMount(),t.appendChild(o),r.afterMount&&r.afterMount()}),t}function B(){return document.createElement("noscript")}var D=function(n,e){if(!h(n)&&!c(n))switch(n.type){case"text":return R(n.nodeValue);case"thunk":return q(n,e);case"empty":return B();case"native":return z(n,e)}};function F(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n)return e===t&&"thunk"!=e.type?n:!c(e)&&c(t)?G(n,e,t,r):c(e)&&!c(t)?(n.appendChild(D(t)),n):!h(e)&&h(t)||h(e)&&!h(t)?I(n,e,t,r):e.type!==t.type?I(n,e,t,r):t.attributes&&t.attributes.forceUpdate?I(n,e,t,r):v(t)?e.tagName!==t.tagName?I(n,e,t,r):(U(n.childNodes[r],t.attributes,e.attributes),K(n,e,t,r)):b(t)?(e.nodeValue!==t.nodeValue&&(n.childNodes[r].nodeValue=t.nodeValue),n):y(t)?O(e,t)?Q(n,e,t,r):W(n,e,t,r):void 0}function G(n,e,t,r){J(e),n.removeChild(n.childNodes[r])}function I(n,e,t,r){var o=D(t);return J(e),n.replaceChild(o,n.childNodes[r]),o}function J(n){for(;y(n);){var e=n.options.onRemove,t=n.state.model;e&&e(t),n=n.state.vnode}n.children&&n.children.forEach(J)}function K(n,e,t,r){var o=e.children||[],i=t.children||[],u=void 0,a=Array.prototype.slice.call(n.childNodes),c=i.length;for(u=0;u<o.length||u<c;u++)F(a[r],o[u],i[u],u>=c?c:u);return n}function Q(n,e,t,r){var o=t.props,i={children:t.children,props:o},u=void 0;if(p(t.fn))u=e.state.$ins.render(i);else try{u=t.fn(i)}catch(n){u=e.state.$ins.render(i)}return o.onUpdate&&o.onUpdate(),F(n,e.state.vnode,u,r),t.state={vnode:u,$ins:e.state.$ins,model:i},n}function W(){return Q.apply(null,arguments)}function X(n,e){var t=this,r=e||{node:null,oldNode:null,ins:null},o=r.node,i=r.oldNode,u=r.ins;n="string"==typeof n?document.querySelector(n):n;var a=function(e){return"updateAll"===e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;try{e=u&&u.render()}catch(n){}F(t,i,e),i=e}()};return e||(n.innerHTML=""),function(e){var r=e;if(r.children&&!r.children.length){var c=r,f=c.props,d=c.children,l=c.fn,s={children:d,props:f};(r=r.fn(s)).fn=l}return"render"in e&&(r=e.render(),u=e,e.$update=e.$update.bind(t,function(){a("updateAll")})),o?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return F(arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i,e),{node:o,oldNode:i=e,ins:u}}(r):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return o=D(e,a),t.appendChild(o),{node:o,oldNode:i=e,ins:u}}(r)}}var Y=function(n){function i(){return e(this,i),o(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return r(i,C),t(i,[{key:"render",value:function(n){var e=n.props,t=n.children,r=N(t),o=E(t,"else");o.index>=0&&r.splice(o.index,1);var i=N(e);return delete i.cond,e.cond?w("div",i,r):w("div",i,o.children)}}]),i}(),Z=function(n){function i(){return e(this,i),o(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return r(i,C),t(i,[{key:"handlePath",value:function(n,e){var t=n.match(/__(.*?)__/g),r="";return t&&t.forEach(function(t){r=e[t.substring(2,t.length-2)],n=n.replace(t,void 0===r?"":r)}),n}},{key:"handleAttribute",value:function(n,e){var t=this;Object.keys(n).forEach(function(r){n[r]=t.handlePath(n[r],e)})}},{key:"handleChildren",value:function(n,e){var t=this;return n.forEach(function(n){n.nodeValue&&(n.nodeValue=t.handlePath(n.nodeValue,e)),n.attributes&&t.handleAttribute(n.attributes,e),n.children&&t.handleChildren(n.children,e)}),n}},{key:"render",value:function(n){var e=this,t=n.props,r=n.children;if(t.data){var o="",i=[];t.data.forEach(function(n,u){n.index=u,o=A(n,t.key||"item"),i=i.concat(e.handleChildren(N(r),o))});var u=N(t);return delete u.data,delete u.key,w("div",u,i)}return""}}]),i}(),nn=function(n){function i(){return e(this,i),o(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return r(i,C),t(i,[{key:"render",value:function(n){var e=n.props,t=n.children;if(e&&Object.keys(e).indexOf("cond")>=0){var r=E(t,"else"),o=t;r.index>=0&&(o=N(t)).splice(r.index,1);var i=N(e);return delete i.cond,e.cond?w("div",i,o):w("div",i,r.children)}return w("div",e,t)}}]),i}(),en=w,tn=C,rn=Y,on=Z,un=nn,an=function(n){for(var e=arguments,t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=e[o];return function(){if("render"in r[0])X(n)(r[0]);else{var e=X(n)(w(r[0],null));r.map(function(t){t.$update=function(){e=X(n,e)(w(r[0],null))}})}}()};export{en as l,tn as component,rn as IF,on as FOR,un as ELSE,an as app};
